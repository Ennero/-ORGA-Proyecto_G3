<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Interfaz de Juego</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="container">
        <h1>
            <span class="bomba"></span> Buscaminas <span class="bomba"></span>
        </h1>

        <div class="botones">
            <!-- Bot贸n para iniciar nuevo juego -->
            <button onclick="nuevoJuego()">Nuevo Juego</button>

            <!-- Bot贸n para cargar el archivo y mandarlo al textarea de entrada -->
            <button onclick="cargarArchivo()">Cargar Archivo</button>

            <!-- Bot贸n para iniciar el juego -->
            <button onclick="configurarJuego()">Configurar Juego</button>

            <!-- Bot贸n para iniciar el juego -->
            <button onclick="iniciarJuego()">Iniciar Juego</button>
        </div>
        <div class="contenido-flex">
            <div class="textareas">
                <!-- Textarea para mostrar el contenido del archivo -->
                <textarea readonly id="entradaArchivo" class="area-texto entrada-texto" placeholder="Entrada del archivo..."></textarea>
                <!-- Textarea para mostrar la salida del juego o procesamiento -->
                <textarea readonly id="salidaArchivo" class="area-texto salida-texto" placeholder="Salida del archivo..."></textarea>
            </div>
            <div class="matriz">
                <!-- Matriz 4x4 de botones -->
                <button>1</button>
                <button>2</button>
                <button>3</button>
                <button>4</button>
                <button>5</button>
                <button>6</button>
                <button>7</button>
                <button>8</button>
                <button>9</button>
                <button>10</button>
                <button>11</button>
                <button>12</button>
                <button>13</button>
                <button>14</button>
                <button>15</button>
                <button>16</button>
            </div>
        </div>
    </div>

    <script>
        // Funci贸n para cargar el archivo
        function cargarArchivo() {
            // Crear un input oculto para seleccionar el archivo
            const inputArchivo = document.createElement('input');
            inputArchivo.type = 'file';
            inputArchivo.accept = '*/*,.org';  // Puedes especificar el tipo de archivo que deseas aceptar

            // Cuando se selecciona un archivo, lo leemos
            inputArchivo.onchange = function(event) {
                const archivo = event.target.files[0];
                if (archivo) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        // Mostrar el contenido del archivo en el textarea de entrada
                        document.getElementById('entradaArchivo').value = e.target.result;
                    };
                    reader.readAsText(archivo);
                }
            };

            // Simulamos un clic en el input oculto para abrir el selector de archivos
            inputArchivo.click();
        }

        // Funci贸n para manejar el inicio de un nuevo juego
        function nuevoJuego() {
            document.getElementById('entradaArchivo').value = ''; // Limpiar textarea de entrada
            document.getElementById('salidaArchivo').value = ''; // Limpiar textarea de salida
            alert("Nuevo juego iniciado.");
        }

        // Funci贸n para manejar la l贸gica de iniciar el juego
        function configurarJuego() {
            const contenido = document.getElementById('entradaArchivo').value;
            console.log("Contenido del archivo:", contenido); // Para depuraci贸n
            if (contenido) {
                fetch("http://localhost:3000/procesar", { // URL del backend
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({ content: contenido }) // Enviamos el contenido del textarea
                })
                .then(response => response.json())
                .then(data => {
                    document.getElementById('salidaArchivo').value = data.resultado;
                })
                .catch(error => {
                    console.error("Error:", error);
                });
            } else {
                alert("Primero carga un archivo.");
            }
        }
        document.querySelectorAll('.bomba').forEach(bomba => {
        bomba.addEventListener('click', () => {
            // Crear la explosi贸n
            const explosion = document.createElement('div');
            explosion.classList.add('explosion');
            bomba.appendChild(explosion);

            // Eliminar la explosi贸n despu茅s de la animaci贸n
            setTimeout(() => {
                explosion.remove();
            }, 500);
        });
    });
    // este sera el mensaje de que la bomba se coloca ahi voz 28 si lo eliminas

    document.querySelectorAll('.matriz button').forEach(btn => {
        btn.addEventListener('click', () => {
            alert('ｐbomba colocadaｐ');
        });
    });

    </script>
</body>
</html>